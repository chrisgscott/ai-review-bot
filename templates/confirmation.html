{% extends "base_public.html" %}
{% block content %}

<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-4">Thank You for Your Testimonial!</h1>

    {% if show_review_buttons %}
    <p>I've created a summary of our conversation. If you're happy with it, please consider sharing it on our review page.</p>
    {% else %}
    <p>I've created a summary of our conversation. Thank you for taking the time to share your experience with us.</p>
    {% endif %}

    <div class="bg-base-200 p-4 rounded-lg mb-6">
        <h2 class="text-xl font-semibold mb-2">Your Testimonial Summary:</h2>
        <p>{{ testimonial.summary }}</p>
    </div>

    {% if show_review_buttons %}
    <div class="flex flex-row gap-4">
        <button class="btn btn-primary" onclick="copyToClipboard()">Copy to Clipboard</button>
        <a href="{{ business_profile.review_url }}" class="btn btn-secondary" target="_blank">
            {{ business_profile.review_button_text or 'Post Your Review' }}
        </a>
    </div>
    {% endif %}
</div>

<script>
function copyToClipboard() {
    const summaryText = "{{ testimonial.summary }}";
    const tempTextArea = document.createElement('textarea');
    tempTextArea.value = summaryText;
    document.body.appendChild(tempTextArea);
    tempTextArea.select();
    
    try {
        const successful = document.execCommand('copy');
        const msg = successful ? 'successful' : 'unsuccessful';
        console.log('Copying text command was ' + msg);
        if (successful) {
            alert('Testimonial copied to clipboard!');
        } else {
            alert('Unable to copy to clipboard. Please try again.');
        }
    } catch (err) {
        console.error('Oops, unable to copy', err);
        alert('Unable to copy to clipboard. Please try again.');
    }
    
    document.body.removeChild(tempTextArea);
}
</script>

{% endblock %}